{% extends "testcases/master/template-master.jinja2" %}

{% set test_timeout = 30 %}
{% block metadata %}
  {{ super() }}
{% endblock metadata %}

{% set test_name = "armnn32bit" %}

{% block test_target %}
  {{ super() }}
     -repository:
        metadata:
          format: Lava-Test Test Definition 1.0
          name: armnn-test
          os:
          - debian
          scope:
          - functional
        run:
          steps:
          - cd
          - apt-get -y install ca-certificates
          - apt-get -y update
          - apt-get install -y wget
          - mkdir /usr/local/bin
          - cd /usr/local/bin
          - wget --no-check-certificate {{ ARMNN_TARBALL_URL }}
          - tar xf armnn32.tar.xz
          - cd home/theodore
          - export BASEDIR=`pwd`
          - mv $BASEDIR/armnn-pi $BASEDIR/armnn
          - cd $BASEDIR/armnn/build
          - ln -s libprotobuf.so.15.0.0 ./libprotobuf.so.15
          - export LD_LIBRARY_PATH=`pwd`
          - chmod a+x UnitTests
          - ./UnitTests
      from: inline
      name: armnn
      path: inline/armnn.yaml
{% endblock test_target %}
